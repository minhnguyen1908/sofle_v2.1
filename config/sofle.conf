# -----------------------------
# Main Keyboard Behavior
# -----------------------------

## Debouncing (Key sensitivity)
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=3
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=3

## Encoder (Disabled for now to fix build warnings)
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# Increase main stack for heavier LVGL 9 operations
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y
CONFIG_ZMK_DISPLAY_DEDICATED_THREAD_STACK_SIZE=4096

# Ensure the display system has enough heap memory
CONFIG_HEAP_MEM_POOL_SIZE=16384

# -----------------------------
# Power & Connection
# -----------------------------

## Sleep (Disabled, as you requested)
CONFIG_ZMK_SLEEP=n
# CONFIG_ZMK_IDLE_TIMEOUT=60000
# CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=300000

## USB & Power
CONFIG_ZMK_USB=y
CONFIG_ZMK_EXT_POWER=y

## Bluetooth (BLE)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# -----------------------------
# Features
# -----------------------------

## ZMK Studio (Hot-fix)
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCKING=n
CONFIG_ZMK_STUDIO_LOCK_ON_DISCONNECT=n

## OLED Display (Main)
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=n #customer OLED of mctechnology
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_BUILT_IN=y
# Show battery percentage instead of icon
CONFIG_ZMK_WIDGET_BATTERY_STATUS_SHOW_PERCENTAGE=y

# ------------------------------------------
# SPLIT KEYBOARD SPECIFICS
# ------------------------------------------

# 1. Report Right-side Battery to the Left side
# (Crucial for your OLED to show accurate R% battery)
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y

# 2. Report Right-side Battery to the Computer
# (So macOS Bluetooth menu shows the lowest of the two batteries)
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
